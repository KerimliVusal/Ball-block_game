(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r,i=n(0),a=n.n(i),c=n(6),o=n.n(c),u=(n(14),n(3)),l=function(){return a.a.createElement("div",{className:"loa"},a.a.createElement("h1",{className:"animate"},a.a.createElement("div",null,a.a.createElement("img",{src:"/breakout-tutorial.gif",alt:"gif loadergi",className:"img"})),a.a.createElement("div",null,"Next Movies . . .")))},s=n(2),h=n(1),d=n(4),f=function(e){return Object(d.a)(Array(e).keys())},v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t[Math.floor(Math.random()*t.length)]},m=function(e,t){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}},w=function(){return Math.floor(3*Math.random())},b=function(e,t){return f(e).map(function(){return f(t).map(w)})},p=[{lives:5,paddleWidth:3.5,speed:1,blocks:b(3,6)},{lives:4,paddleWidth:3,speed:1.4,blocks:b(4,7)},{lives:3,paddleWidth:2.5,speed:1.8,blocks:b(5,8)},{lives:3,paddleWidth:2,speed:2.2,blocks:b(6,9)}],y=n(7),g=n(8),j=function(){function e(t,n){Object(y.a)(this,e),this.x=t,this.y=n}return Object(g.a)(e,[{key:"scaleBy",value:function(t){return new e(this.x*t,this.y*t)}},{key:"length",value:function(){return Math.hypot(this.x,this.y)}},{key:"add",value:function(t){var n=t.x,r=t.y;return new e(this.x+n,this.y+r)}},{key:"normalize",value:function(){return this.scaleBy(1/this.length())}},{key:"subtract",value:function(t){var n=t.x,r=t.y;return new e(this.x-n,this.y-r)}},{key:"dotProduct",value:function(e){var t=e.x,n=e.y;return this.x*t+this.y*n}},{key:"projectOn",value:function(t){var n=this.dotProduct(t)/t.length();return new e(n*t.x,n*t.y)}},{key:"reflect",value:function(e){return this.subtract(this.projectOn(e).scaleBy(2))}},{key:"rotate",value:function(t){var n=function(e){return e*Math.PI/180}(t),r=Math.cos(n),i=Math.sin(n);return new e(this.x*r-this.y*i,this.x*i+this.y*r)}},{key:"crossProduct",value:function(e){var t=e.x,n=e.y;return this.x*n-t*this.y}},{key:"angleBetween",value:function(e){return 180*Math.atan2(this.crossProduct(e),this.dotProduct(e))/Math.PI}}]),e}(),O="LEFT",E="RIGHT",k=new j(-1,0),x=new j(1,0),N=new j(0,-1),z=new j(0,1),T=k.add(N).normalize(),I=x.add(N).normalize(),M=function(e,t,n){var r=t-1/3;return{paddle:{position:new j((e-n)/2,r),width:n,height:1/3},ball:{center:new j(t/2,r-.4),radius:.2,direction:v(T,I)}}},B=function(e){var t,n=e.lives,r=e.paddleWidth,i=e.speed,a=e.blocks,c=a[0].length,o=c,u=(o-o*(1/3)-a.length*(1/3))/2,l=a.map(function(e,t){return e.map(function(e,n){return{density:e,position:new j(n,u+t*(1/3)),width:1,height:1/3}})}),s={width:c,height:o};return Object(h.a)({size:s,blocks:(t=l,t.reduce(function(e,t){return[].concat(Object(d.a)(e),Object(d.a)(t))},[]))},M(c,o,r),{lives:n,speed:i})},W=function(e,t,n,r){return e>=n&&e<=r||t>=n&&t<=r},D=function(e,t,n){var r=e.size,i=e.speed,a=e.lives,c=.005*n*i,o=function(e,t,n,r){if(!r)return e;var i=r===O?k:x,a=e.position.add(i.scaleBy(n)).x,c=function(t){return Object(h.a)({},e,{position:new j(t,e.position.y)})};return a<0?c(0):a+e.width>t.width?c(t.width-e.width):c(a)}(e.paddle,r,c,t),u=e.ball.radius,l=e.ball.direction,s=e.ball.center.add(l.scaleBy(c)),d=s.y+u;if(d>r.height)return Object(h.a)({},e,M(r.width,r.height,o.width),{lives:a-1});var f=function(t){return Object(h.a)({},e,{paddle:o,ball:Object(h.a)({},e.ball,t)})},v=function(e){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,r=e.angleBetween(t),i=90-n;if(r<0){if(r>-n)return e.rotate(-n);if(r<-i)return e.rotate(-i)}else{if(r<n)return e.rotate(n);if(r>i)return e.rotate(i)}return t}(e,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,n=function(){return Math.random()*t-t/2},r=new j(n(),n());return e.add(r).normalize()}(l.reflect(e)));return f({direction:t})},m=s.x-u,w=s.x+u,b=s.y-u,p=o.position.x,y=p+o.width,g=o.position.y;if(Math.abs(N.angleBetween(l))>90&&d>=g&&w>=p&&m<=y)return v(N);if(b<=0)return v(z);if(m<=0)return v(x);if(w>=r.width)return v(k);var E,T,I=e.blocks.find(function(e){var t=e.position,n=e.width,r=e.height;return W(b,d,t.y,t.y+r)&&W(m,w,t.x,t.x+n)});if(I){var B=I.density-1,D=Object(h.a)({},I,{density:B}),S=B<0?(E=e.blocks,T=I,E.filter(function(e){return e!==T})):function(e,t,n){return e.map(function(e){return e===t?n:e})}(e.blocks,I,D);return Object(h.a)({},v(function(){var e=I.position.y,t=e+I.height,n=I.position.x;if(b>e-u&&d<t+u){if(m<n)return k;if(w>n+I.width)return x}return b>e?z:b<=e?N:void 0}()),{blocks:S})}return f({center:s})},S=function(e){var t=e.level,n=e.unit;return a.a.createElement("text",{x:n,y:2*n,fontSize:n,className:"level"},"LEVEL: ",t)},P=function(e){var t=e.lives,n=e.containerWidth,r=e.unit,i=2*r;return f(t).map(function(e){return a.a.createElement("rect",{className:"life",rx:r/4,height:r,width:i,y:r,x:n-r-i*(e+1)-r/2*e,key:e})})},L=f(3).map(function(e){return"rgba(226, 100, 10, ".concat(1/(3-e),")")}),R=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,c=e.density;return a.a.createElement("rect",{className:"block",fill:L[c],x:t,y:n,width:r,height:i})},C=function(e){var t=e.x,n=e.y,r=e.width,i=e.height;return a.a.createElement("rect",{className:"paddle",x:t,y:n,width:r,height:i})},V=function(e){var t=e.x,n=e.y,r=e.radius;return a.a.createElement("circle",{className:"ball",cx:t,cy:n,r:r})},A={LEFT:[15,37],RIGHT:[18,39]},G=function(e,t){var n=e.width/t.width,r=e.height/t.height,i=Math.min(n,r);return{projectDistance:function(e){return e*i},projectVector:function(e){return e.scaleBy(i)}}},H=function(e){var t=function(){var e=localStorage.getItem("level");return e?parseInt(e,10):0}(),n=B(p[t]),r=G(e,n.size);return{level:t,game:n,containerSize:e,projectDistance:r.projectDistance,projectVector:r.projectVector,time:Date.now(),stopTime:void 0,movement:void 0}},_="CONTAINER_SIZE_CHANGE",F="KEY_DOWN",K="KEY_UP",Y="TICK",J=(r={},Object(s.a)(r,_,function(e,t){return Object(h.a)({},e,{containerSize:t},G(t,e.game.size))}),Object(s.a)(r,F,function(e,t){return A.LEFT.includes(t)?Object(h.a)({},e,{movement:O}):A.RIGHT.includes(t)?Object(h.a)({},e,{movement:E}):e}),Object(s.a)(r,K,function(e,t){var n=Object(h.a)({},e,{movement:void 0});return 32===t?e.stopTime?Object(h.a)({},n,{stopTime:void 0,time:e.time+Date.now()-e.stopTime}):Object(h.a)({},n,{stopTime:Date.now()}):n}),Object(s.a)(r,Y,function(e){if(e.stopTime)return e;var t=Date.now(),n=D(e.game,e.movement,t-e.time),r=Object(h.a)({},e,{time:t});if(n.lives<1)return alert("Chance is over"),Object(h.a)({},r,{game:B(p[e.level])});if(n.blocks.length<1){alert("You win");var i=e.level===p.length?e.level:e.level+1;localStorage.setItem("level",i);var a=B(p[e.level]);return Object(h.a)({},r,{level:i,game:a},G(e.containerSize,a.size))}return Object(h.a)({},r,{game:n})}),r),U=function(e,t){var n=t.type,r=t.payload,i=J[n];return i?i(e,r):e},Z=function(e){var t=Object(i.useReducer)(U,e,H),n=Object(u.a)(t,2),r=n[0],c=n[1],o=function(e,t){return c({type:e,payload:t})},l=r.projectDistance,s=r.projectVector,h=r.level,d=r.game,f=d.blocks,v=d.paddle,w=d.ball,b=d.size,p=b.width,y=b.height,g=d.lives;Object(i.useEffect)(function(){return o(_,e)},[e]),Object(i.useEffect)(function(){var e=setInterval(function(){return o(Y)},1e3/60),t=m("keydown",function(e){var t=e.which;return o(F,t)}),n=m("keyup",function(e){var t=e.which;return o(K,t)});return function(){clearInterval(e),t(),n()}},[]);var j=l(p),O=l(w.radius);return a.a.createElement("svg",{width:j,height:l(y),className:"scene"},a.a.createElement(S,{unit:O,level:h}),a.a.createElement(P,{lives:g,containerWidth:j,unit:O}),f.map(function(e){var t=e.density,n=e.position,r=e.width,i=e.height;return a.a.createElement(R,Object.assign({density:t,key:"".concat(n.x,"-").concat(n.y),width:l(r),height:l(i)},s(n)))}),a.a.createElement(C,Object.assign({width:l(v.width),height:l(v.height)},s(v.position))),a.a.createElement(V,Object.assign({},s(w.center),{radius:O})))},$=function(){var e=Object(i.useRef)(),t=Object(i.useState)(),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(i.useEffect)(function(){var t=function(){var t=e.current.getBoundingClientRect(),n=t.width,r=t.height;c({width:n,height:r})},n=m("resize",t);return t(),n},[]),a.a.createElement("div",{className:"page"},a.a.createElement("div",{className:"scene-container",ref:e},r&&a.a.createElement(Z,{width:r.width,height:r.height})))},q=function(){var e=Object(i.useState)(!0),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)(function(){setTimeout(function(){return r(!1)},4e3)},[]),a.a.createElement("div",null,n?a.a.createElement(l,null):a.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,t,n){e.exports=n(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.7d76e83d.chunk.js.map